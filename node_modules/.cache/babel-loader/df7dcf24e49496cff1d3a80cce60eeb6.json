{"ast":null,"code":"/**\n * @license\n *\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Define generation methods for custom blocks.\n * @author samelh@google.com (Sam El-Husseini)\n */\n// More on generating code:\n// https://developers.google.com/blockly/guides/create-custom-blocks/generating-code\nimport * as Blockly from 'blockly/core';\nimport 'blockly/javascript';\n\nBlockly.JavaScript['test_react_field'] = function (block) {\n  return \"console.log('custom block');\\n\";\n};\n\nBlockly.JavaScript['test_react_date_field'] = function (block) {\n  return 'console.log(' + block.getField('DATE').getText() + ');\\n';\n}; // Blockly.JavaScript['robot_action_speak'] = function (block) {\n//   var code = '';\n//   var tts = Blockly.JavaScript.valueToCode(\n//     block,\n//     'TEXT_TO_SPEACH',\n//     Blockly.JavaScript.ORDER_ATOMIC\n//   );\n//   code += 'var speak_req = new XMLHttpRequest();\\n';\n//   code += 'var json_content = \\'{\"SPEAK\":\"' + tts.replace(/'/g, '') + '\"}\\';\\n';\n//   code += \"var url = 'https://temi-cmd.firebaseio.com/ActionList/action_' + actionID + '.json';\\n\";\n//   code += \"speak_req.open('PUT', url, true);\\n\";\n//   code += \"speak_req.setRequestHeader('Content-Type', 'application/json');\\n\";\n//   code += 'speak_req.send(JSON.stringify(JSON.parse(json_content)));\\n';\n//   code += 'actionID += 1;\\n\\n\\n';\n//   return code;\n// };\n\n\nBlockly.JavaScript['robot_action_speak'] = function (block) {\n  var lang = block.getField('LANG').getValue();\n  var tts = Blockly.JavaScript.valueToCode(block, 'TTS', Blockly.JavaScript.ORDER_ATOMIC);\n  var content = '\\'{\"order\":<>, \"action\":\"SPEAK\", \"lang\":\"{}\", \"content\":\"><\"}\\'.replace(/<>/g, actionID)\\n'.replace(/></g, tts.replace(/'/g, ''));\n  content = content.replace(/{}/g, lang.replace(/'/g, ''));\n  var code = 'SendCmd(\\'PUT\\'url+\"/ActionList/action_<>\".replace(/<>/g, actionID) + \".json\", {})\\n'.replace(/{}/g, content);\n  code += 'actionID += 1;\\n\\n';\n  return code;\n};\n\nBlockly.JavaScript['robot_action_move_forward'] = function (block) {\n  var content = '\\'{\"order\":<>, \"action\":\"MOVE\", \"content\":\"FORWARD\"}\\'.replace(/<>/g, actionID)\\n';\n  var code = 'SendCmd(url+\"/ActionList/action_<>\".replace(/<>/g, actionID) + \".json\", {})\\n'.replace(/{}/g, content);\n  code += 'actionID += 1;\\n\\n';\n  return code;\n};\n\nBlockly.JavaScript['robot_action_move_backward'] = function (block) {\n  var content = '\\'{\"order\":<>, \"action\":\"MOVE\", \"content\":\"BACKWARD\"}\\'.replace(/<>/g, actionID)\\n';\n  var code = 'SendCmd(url+\"/ActionList/action_<>\".replace(/<>/g, actionID) + \".json\", {})\\n'.replace(/{}/g, content);\n  code += 'actionID += 1;\\n\\n';\n  return code;\n};\n\nBlockly.JavaScript['robot_action_move_left'] = function (block) {\n  var content = '\\'{\"order\":<>, \"action\":\"MOVE\", \"content\":\"LEFT\"}\\'.replace(/<>/g, actionID)\\n';\n  var code = 'SendCmd(url+\"/ActionList/action_<>\".replace(/<>/g, actionID) + \".json\", {})\\n'.replace(/{}/g, content);\n  code += 'actionID += 1;\\n\\n';\n  return code;\n};\n\nBlockly.JavaScript['robot_action_move_right'] = function (block) {\n  var content = '\\'{\"order\":<>, \"action\":\"MOVE\", \"content\":\"RIGHT\"}\\'.replace(/<>/g, actionID)\\n';\n  var code = 'SendCmd(url+\"/ActionList/action_<>\".replace(/<>/g, actionID) + \".json\", {})\\n'.replace(/{}/g, content);\n  code += 'actionID += 1;\\n\\n';\n  return code;\n};\n\nBlockly.JavaScript['robot_action_save_location'] = function (block) {\n  var location = Blockly.JavaScript.valueToCode(block, 'LOCATION', Blockly.JavaScript.ORDER_ATOMIC);\n  var content = '\\'{\"content\":\"<>\"}\\'\\n'.replace(/<>/g, location.replace(/\\'/g, \"\"));\n  var code = 'SendCmd(url+\"/ProgramInfo/SavedLocation/L<>.json\".replace(/<>/g, locationID), {})\\n'.replace(/{}/g, content);\n  code += 'locationID += 1;\\n\\n';\n  return code;\n}; // curl --header \"Content-Type: application/json\" \\\n//   --request PATCH \\\n//   --data '{\"L2\":\"test2\"}' \\\n//   https://temi-cmd.firebaseio.com/ProgramInfo/SavedLocation.json","map":{"version":3,"sources":["/Users/goragodp/Project/blockly-react/src/generator/generator.js"],"names":["Blockly","JavaScript","block","getField","getText","lang","getValue","tts","valueToCode","ORDER_ATOMIC","content","replace","code","location"],"mappings":"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","sourcesContent":["/**\n * @license\n *\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Define generation methods for custom blocks.\n * @author samelh@google.com (Sam El-Husseini)\n */\n\n// More on generating code:\n// https://developers.google.com/blockly/guides/create-custom-blocks/generating-code\n\nimport * as Blockly from 'blockly/core';\nimport 'blockly/javascript';\n\nBlockly.JavaScript['test_react_field'] = function (block) {\n  return \"console.log('custom block');\\n\";\n};\n\nBlockly.JavaScript['test_react_date_field'] = function (block) {\n  return 'console.log(' + block.getField('DATE').getText() + ');\\n';\n};\n\n// Blockly.JavaScript['robot_action_speak'] = function (block) {\n//   var code = '';\n//   var tts = Blockly.JavaScript.valueToCode(\n//     block,\n//     'TEXT_TO_SPEACH',\n//     Blockly.JavaScript.ORDER_ATOMIC\n//   );\n//   code += 'var speak_req = new XMLHttpRequest();\\n';\n//   code += 'var json_content = \\'{\"SPEAK\":\"' + tts.replace(/'/g, '') + '\"}\\';\\n';\n//   code += \"var url = 'https://temi-cmd.firebaseio.com/ActionList/action_' + actionID + '.json';\\n\";\n//   code += \"speak_req.open('PUT', url, true);\\n\";\n//   code += \"speak_req.setRequestHeader('Content-Type', 'application/json');\\n\";\n//   code += 'speak_req.send(JSON.stringify(JSON.parse(json_content)));\\n';\n//   code += 'actionID += 1;\\n\\n\\n';\n//   return code;\n// };\n\nBlockly.JavaScript['robot_action_speak'] = function(block) {\n  var lang = block.getField('LANG').getValue();\n  var tts = Blockly.JavaScript.valueToCode(block, 'TTS', Blockly.JavaScript.ORDER_ATOMIC);\n\n  var content = '\\'{\"order\":<>, \"action\":\"SPEAK\", \"lang\":\"{}\", \"content\":\"><\"}\\'.replace(/<>/g, actionID)\\n'.replace(/></g, tts.replace(/'/g, ''));\n  content = content.replace(/{}/g, lang.replace(/'/g, ''));\n  var code = 'SendCmd(\\'PUT\\'url+\"/ActionList/action_<>\".replace(/<>/g, actionID) + \".json\", {})\\n'.replace(/{}/g, content);\n  code += 'actionID += 1;\\n\\n';\n\n\n  return code;\n}\n\nBlockly.JavaScript['robot_action_move_forward'] = function (block) {\n  var content = '\\'{\"order\":<>, \"action\":\"MOVE\", \"content\":\"FORWARD\"}\\'.replace(/<>/g, actionID)\\n'\n  var code = 'SendCmd(url+\"/ActionList/action_<>\".replace(/<>/g, actionID) + \".json\", {})\\n'.replace(/{}/g, content);\n  code += 'actionID += 1;\\n\\n';\n  return code;\n}\n\nBlockly.JavaScript['robot_action_move_backward'] = function (block) {\n  var content = '\\'{\"order\":<>, \"action\":\"MOVE\", \"content\":\"BACKWARD\"}\\'.replace(/<>/g, actionID)\\n'\n  var code = 'SendCmd(url+\"/ActionList/action_<>\".replace(/<>/g, actionID) + \".json\", {})\\n'.replace(/{}/g, content);\n  code += 'actionID += 1;\\n\\n';\n  return code;\n}\n\nBlockly.JavaScript['robot_action_move_left'] = function (block) {\n  var content = '\\'{\"order\":<>, \"action\":\"MOVE\", \"content\":\"LEFT\"}\\'.replace(/<>/g, actionID)\\n'\n  var code = 'SendCmd(url+\"/ActionList/action_<>\".replace(/<>/g, actionID) + \".json\", {})\\n'.replace(/{}/g, content);\n  code += 'actionID += 1;\\n\\n';\n  return code;\n}\n\n\nBlockly.JavaScript['robot_action_move_right'] = function (block) {\n  var content = '\\'{\"order\":<>, \"action\":\"MOVE\", \"content\":\"RIGHT\"}\\'.replace(/<>/g, actionID)\\n'\n  var code = 'SendCmd(url+\"/ActionList/action_<>\".replace(/<>/g, actionID) + \".json\", {})\\n'.replace(/{}/g, content);\n  code += 'actionID += 1;\\n\\n';\n  return code;\n}\n\nBlockly.JavaScript['robot_action_save_location'] = function(block) {\n  var location = Blockly.JavaScript.valueToCode(block, 'LOCATION', Blockly.JavaScript.ORDER_ATOMIC);\n\n  var content = '\\'{\"content\":\"<>\"}\\'\\n'.replace(/<>/g, location.replace(/\\'/g, \"\"));\n  var code = 'SendCmd(url+\"/ProgramInfo/SavedLocation/L<>.json\".replace(/<>/g, locationID), {})\\n'.replace(/{}/g, content);\n  code += 'locationID += 1;\\n\\n';\n\n  return code;\n};\n\n\n// curl --header \"Content-Type: application/json\" \\\n//   --request PATCH \\\n//   --data '{\"L2\":\"test2\"}' \\\n//   https://temi-cmd.firebaseio.com/ProgramInfo/SavedLocation.json"]},"metadata":{},"sourceType":"module"}